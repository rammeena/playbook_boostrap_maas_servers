---
- name: change root password
  user:
    name: root
    password: "{{ COMMON_ROOT_PASSWORD }}"

- name: Allow Permit Root Login
  lineinfile:
    dest: /etc/ssh/sshd_config
    regexp: "^#PermitRootLogin"
    line: "PermitRootLogin yes"
    state: present
  notify: restart sshd

- name: Allow Root password authentication
  lineinfile:
    dest: /etc/ssh/sshd_config
    regexp: "^PasswordAuthentication"
    line: "PasswordAuthentication yes"
    state: present
  notify: restart sshd

# - name: Generate Key Pair for Root User
#   openssh_keypair:
#     comment: "KeyPair generated by Ansible"
#     force: no
#     group: root
#     owner: root
#     path:
#       - /root/.ssh/id_rsa
#       - /root/.ssh/id_rsa.pub
